<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéÆ</text></svg>">
    <meta name="description" content="Session 3: Interactive Game - Build a browser game with collision detection, scoring, and game loops!">
    <title>Session 3: Interactive Game | Code & Create Workshop</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #4facfe;
            --secondary: #00f2fe;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1f2937;
            --gray: #6b7280;
            --light: #f3f4f6;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: var(--light);
        }

        .workshop-nav {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 1001;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .workshop-nav a {
            color: white;
            text-decoration: none;
            margin: 0 15px;
            opacity: 0.9;
            font-weight: 600;
        }

        .workshop-nav a:hover {
            opacity: 1;
            text-decoration: underline;
        }

        .workshop-nav .current {
            opacity: 1;
            border-bottom: 2px solid white;
            padding-bottom: 2px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 60px 20px 40px 20px;
            text-align: center;
        }

        header h1 {
            font-size: 3em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.3em;
            opacity: 0.95;
        }

        .session-info {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .info-badge {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
        }

        .tabs {
            display: flex;
            background: var(--dark);
            overflow-x: auto;
            position: sticky;
            top: 52px;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .tab-btn {
            flex: 1;
            min-width: 120px;
            background: none;
            border: none;
            color: white;
            padding: 18px 15px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 600;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab-btn:hover {
            background: rgba(255,255,255,0.1);
        }

        .tab-btn.active {
            background: rgba(255,255,255,0.15);
            border-bottom-color: var(--primary);
        }

        .tab-number {
            display: block;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .tab-content {
            display: none;
            padding: 40px 20px;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: var(--primary);
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--primary);
        }

        .section h3 {
            color: var(--dark);
            font-size: 1.5em;
            margin: 30px 0 15px 0;
        }

        .concept-box {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid var(--primary);
        }

        .concept-box h3 {
            color: var(--primary);
            margin-top: 0;
        }

        .code-example {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            position: relative;
        }

        .code-example pre {
            margin: 0;
            white-space: pre-wrap;
        }

        .code-label {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--primary);
            color: white;
            padding: 4px 12px;
            border-radius: 5px;
            font-size: 0.85em;
        }

        .interactive-demo {
            background: white;
            border: 3px solid var(--primary);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .demo-title {
            text-align: center;
            color: var(--primary);
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .checkpoint {
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid var(--success);
            margin: 20px 0;
        }

        .checkpoint h4 {
            color: #065f46;
            margin-bottom: 10px;
        }

        .tip {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid var(--warning);
            margin: 20px 0;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            background: var(--primary);
            color: white;
            font-weight: bold;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            margin: 5px;
        }

        button:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.3);
        }

        button:active {
            transform: translateY(0);
        }

        canvas {
            border: 4px solid var(--dark);
            border-radius: 10px;
            display: block;
            margin: 20px auto;
            background: #000;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            max-width: 100%;
            height: auto;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .game-info {
            text-align: center;
            font-size: 1.2em;
            margin: 15px 0;
            font-weight: bold;
            color: var(--primary);
        }

        .instructions {
            background: var(--light);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 15px 0;
            font-weight: 600;
        }

        footer {
            background: var(--dark);
            color: white;
            padding: 40px 20px;
            text-align: center;
        }

        footer a {
            color: var(--primary);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }

            .tabs {
                position: relative;
                top: 0;
            }

            .workshop-nav {
                position: relative;
            }

            .tab-btn {
                font-size: 0.85em;
                padding: 12px 10px;
            }

            canvas {
                width: 100%;
                height: auto;
            }

            .workshop-nav a {
                display: block;
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>
    <!-- Workshop Navigation -->
    <div class="workshop-nav">
        <strong>üéÆ Code & Create Workshop</strong>
        <span style="opacity: 0.8;"> | </span>
        <a href="../index.html">Home</a>
        <a href="../session1/index.html">Session 1</a>
        <a href="../session2/index.html">Session 2</a>
        <a href="../session3/index.html" class="current">Session 3</a>
        <a href="../session4/index.html">Session 4</a>
    </div>

    <div class="container">
        <header>
            <h1>üéÆ Session 3: Interactive Game</h1>
            <p>Build Your First Browser Game</p>
            <div class="session-info">
                <div class="info-badge">‚è±Ô∏è 150 minutes</div>
                <div class="info-badge">üéØ Game Development</div>
                <div class="info-badge">üí• Collision Detection</div>
            </div>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="openTab(event, 'intro')">
                <span class="tab-number">üëã</span>
                Intro
            </button>
            <button class="tab-btn" onclick="openTab(event, 'gameloop')">
                <span class="tab-number">üîÑ</span>
                Game Loop
            </button>
            <button class="tab-btn" onclick="openTab(event, 'movement')">
                <span class="tab-number">‚¨ÜÔ∏è</span>
                Movement
            </button>
            <button class="tab-btn" onclick="openTab(event, 'collision')">
                <span class="tab-number">üí•</span>
                Collision
            </button>
            <button class="tab-btn" onclick="openTab(event, 'game')">
                <span class="tab-number">üéÆ</span>
                Full Game
            </button>
        </div>

        <!-- INTRO TAB -->
        <div id="intro" class="tab-content active">
            <div class="section">
                <h2>üëã Welcome to Game Development!</h2>
                <p style="font-size: 1.2em; line-height: 1.8;">
                    Today you'll build a <strong>real browser game</strong> from scratch!
                    Learn the core concepts that power every game you've ever played.
                </p>
            </div>

            <div class="concept-box">
                <h3>üéÆ What Makes a Game?</h3>
                <p style="font-size: 1.1em; line-height: 1.8;">
                    Every game has these core components:
                </p>
                <ul style="padding-left: 40px; line-height: 2; margin-top: 10px; font-size: 1.1em;">
                    <li><strong>Game Loop:</strong> Updates the game 60 times per second</li>
                    <li><strong>Player Input:</strong> Keyboard/mouse controls</li>
                    <li><strong>Movement:</strong> Objects moving on screen</li>
                    <li><strong>Collision Detection:</strong> When things hit each other</li>
                    <li><strong>Scoring:</strong> Keeping track of points</li>
                    <li><strong>Win/Lose Conditions:</strong> Game over states</li>
                </ul>
            </div>

            <div class="section">
                <h3>üéØ What You'll Learn Today</h3>
                <ul style="padding-left: 40px; line-height: 2; font-size: 1.1em;">
                    <li>Create a game loop using <code>requestAnimationFrame</code></li>
                    <li>Handle keyboard input for player control</li>
                    <li>Move objects smoothly across the screen</li>
                    <li>Detect collisions between objects</li>
                    <li>Implement scoring and game states</li>
                    <li>Build a complete "Catch the Falling Objects" game!</li>
                </ul>
            </div>

            <div class="checkpoint">
                <h4>‚úÖ By the End of Today</h4>
                <p>You'll be able to:</p>
                <ul style="padding-left: 20px; margin-top: 10px;">
                    <li>‚úì Understand how game loops work</li>
                    <li>‚úì Create smooth animations</li>
                    <li>‚úì Detect when objects collide</li>
                    <li>‚úì Build a fully playable game</li>
                    <li>‚úì Call yourself a game developer! üéÆ</li>
                </ul>
            </div>

            <div class="tip">
                <h4>üí° Game Dev Mindset</h4>
                <p><strong>Start simple, iterate often!</strong></p>
                <p>Professional games are built step by step. Get something working, then make it better.</p>
                <p>Every bug you fix makes you a better developer!</p>
            </div>
        </div>

        <!-- GAME LOOP TAB -->
        <div id="gameloop" class="tab-content">
            <div class="section">
                <h2>üîÑ The Game Loop: Heart of Every Game</h2>

                <div class="concept-box">
                    <h3>What is a Game Loop?</h3>
                    <p style="font-size: 1.1em; line-height: 1.8;">
                        A game loop runs continuously, updating and drawing your game ~60 times per second.
                        Think of it like a flip book - each frame is slightly different, creating the illusion of movement!
                    </p>
                </div>

                <h3>üíª Basic Game Loop Structure</h3>

                <div class="code-example">
                    <div class="code-label">JavaScript</div>
                    <pre>// Game loop function
function gameLoop() {
    // 1. UPDATE - Change game state
    updateGame();
    
    // 2. DRAW - Render everything
    drawGame();
    
    // 3. REPEAT - Call this function again next frame
    requestAnimationFrame(gameLoop);
}

// Start the loop
gameLoop();</pre>
                </div>

                <div class="tip">
                    <h4>üí° Why requestAnimationFrame?</h4>
                    <p>It syncs with the browser's refresh rate (~60 FPS) for smooth animation.</p>
                    <p>The browser automatically pauses when you switch tabs (saves battery!).</p>
                </div>

                <h3>üé® Interactive Demo: Animation Loop</h3>

                <div class="interactive-demo">
                    <div class="demo-title">Watch the Game Loop in Action</div>
                    
                    <canvas id="loopCanvas" width="800" height="400"></canvas>
                    
                    <div class="controls">
                        <button onclick="startLoop()">‚ñ∂Ô∏è Start Loop</button>
                        <button onclick="stopLoop()">‚è∏Ô∏è Stop Loop</button>
                    </div>
                    
                    <div class="game-info">
                        FPS: <span id="fpsDisplay">0</span> | 
                        Frame: <span id="frameDisplay">0</span>
                    </div>
                </div>

                <h3>üíª Complete Loop Example</h3>

                <div class="code-example">
                    <div class="code-label">JavaScript</div>
                    <pre>let x = 0;  // Ball position
let speed = 2;  // How fast it moves

function update() {
    // Move ball to the right
    x += speed;
    
    // Wrap around when it goes off screen
    if (x > canvas.width) {
        x = 0;
    }
}

function draw() {
    // Clear canvas
    ctx.fillStyle = 'black';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // Draw ball
    ctx.fillStyle = 'cyan';
    ctx.beginPath();
    ctx.arc(x, 200, 20, 0, Math.PI * 2);
    ctx.fill();
}

function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

gameLoop();  // Start!</pre>
                </div>

                <div class="checkpoint">
                    <h4>‚úÖ Game Loop Mastered!</h4>
                    <p>You now understand the fundamental pattern used in ALL games!</p>
                </div>
            </div>
        </div>

        <!-- MOVEMENT TAB -->
        <div id="movement" class="tab-content">
            <div class="section">
                <h2>‚¨ÜÔ∏è Player Movement: Keyboard Control</h2>

                <div class="concept-box">
                    <h3>Handling Keyboard Input</h3>
                    <p style="font-size: 1.1em; line-height: 1.8;">
                        Games need to respond to keyboard input instantly.
                        We track which keys are pressed and update the player's position in the game loop.
                    </p>
                </div>

                <h3>üíª Keyboard Event Listeners</h3>

                <div class="code-example">
                    <div class="code-label">JavaScript</div>
                    <pre>// Track which keys are pressed
let keys = {};

// When key is pressed down
document.addEventListener('keydown', (e) => {
    keys[e.key] = true;
});

// When key is released
document.addEventListener('keyup', (e) => {
    keys[e.key] = false;
});

// Now we can check in the game loop:
function update() {
    if (keys['ArrowLeft']) {
        playerX -= 5;  // Move left
    }
    if (keys['ArrowRight']) {
        playerX += 5;  // Move right
    }
}</pre>
                </div>

                <div class="tip">
                    <h4>üí° Why Track Keys Like This?</h4>
                    <p>This allows <strong>multiple keys</strong> to be pressed at once!</p>
                    <p>For example: moving diagonally in a game (Up + Right together).</p>
                </div>

                <h3>üé® Interactive Demo: Player Control</h3>

                <div class="interactive-demo">
                    <div class="demo-title">Control the Player!</div>
                    
                    <div class="instructions">
                        Use ‚Üê ‚Üí Arrow Keys to Move
                    </div>
                    
                    <canvas id="movementCanvas" width="800" height="400"></canvas>
                    
                    <div class="game-info">
                        Player X: <span id="playerXDisplay">400</span> | 
                        Speed: <span id="speedDisplay">5</span>
                    </div>
                </div>

                <h3>üíª Boundaries & Constraints</h3>

                <div class="code-example">
                    <div class="code-label">JavaScript</div>
                    <pre>function update() {
    // Move player based on keys
    if (keys['ArrowLeft']) {
        playerX -= playerSpeed;
    }
    if (keys['ArrowRight']) {
        playerX += playerSpeed;
    }
    
    // Keep player within boundaries
    if (playerX < 0) {
        playerX = 0;  // Left edge
    }
    if (playerX > canvas.width - playerWidth) {
        playerX = canvas.width - playerWidth;  // Right edge
    }
}</pre>
                </div>

                <div class="checkpoint">
                    <h4>‚úÖ Movement Mastered!</h4>
                    <p>Your player can now move smoothly and stay within bounds!</p>
                </div>
            </div>
        </div>

        <!-- COLLISION TAB -->
        <div id="collision" class="tab-content">
            <div class="section">
                <h2>üí• Collision Detection: When Things Touch</h2>

                <div class="concept-box">
                    <h3>What is Collision Detection?</h3>
                    <p style="font-size: 1.1em; line-height: 1.8;">
                        Collision detection checks if two objects are touching or overlapping.
                        This is how games know when you catch something, hit an enemy, or pick up a power-up!
                    </p>
                </div>

                <h3>üíª Rectangle Collision (AABB)</h3>

                <div class="code-example">
                    <div class="code-label">JavaScript - Axis-Aligned Bounding Box</div>
                    <pre>function checkCollision(rect1, rect2) {
    // rect1 = { x, y, width, height }
    // rect2 = { x, y, width, height }
    
    return rect1.x < rect2.x + rect2.width &&
           rect1.x + rect1.width > rect2.x &&
           rect1.y < rect2.y + rect2.height &&
           rect1.y + rect1.height > rect2.y;
}

// Example usage:
let player = { x: 100, y: 300, width: 50, height: 50 };
let fallingObject = { x: 120, y: 280, width: 30, height: 30 };

if (checkCollision(player, fallingObject)) {
    console.log('Collision detected! üí•');
    score += 10;  // Add points!
}</pre>
                </div>

                <div class="tip">
                    <h4>üí° Understanding AABB Collision</h4>
                    <p>Think of it as checking if rectangles overlap:</p>
                    <ul style="padding-left: 20px; margin-top: 10px;">
                        <li>Is rect1's left edge LEFT of rect2's right edge? ‚úì</li>
                        <li>Is rect1's right edge RIGHT of rect2's left edge? ‚úì</li>
                        <li>Is rect1's top edge ABOVE rect2's bottom edge? ‚úì</li>
                        <li>Is rect1's bottom edge BELOW rect2's top edge? ‚úì</li>
                        <li>If ALL are true ‚Üí COLLISION! üí•</li>
                    </ul>
                </div>

                <h3>üé® Interactive Demo: Collision Detection</h3>

                <div class="interactive-demo">
                    <div class="demo-title">Test Collision Detection</div>
                    
                    <div class="instructions">
                        Move with ‚Üê ‚Üí to catch falling objects!
                    </div>
                    
                    <canvas id="collisionCanvas" width="800" height="400"></canvas>
                    
                    <div class="game-info">
                        Score: <span id="collisionScore">0</span> | 
                        Missed: <span id="missedCount">0</span>
                    </div>
                </div>

                <h3>üíª Circle Collision (Distance-Based)</h3>

                <div class="code-example">
                    <div class="code-label">JavaScript - For Circular Objects</div>
                    <pre>function checkCircleCollision(circle1, circle2) {
    // Calculate distance between centers
    let dx = circle1.x - circle2.x;
    let dy = circle1.y - circle2.y;
    let distance = Math.sqrt(dx * dx + dy * dy);
    
    // Check if distance is less than sum of radii
    return distance < circle1.radius + circle2.radius;
}

// Example:
let player = { x: 100, y: 200, radius: 25 };
let enemy = { x: 150, y: 220, radius: 20 };

if (checkCircleCollision(player, enemy)) {
    console.log('Hit! üí•');
}</pre>
                </div>

                <div class="checkpoint">
                    <h4>‚úÖ Collision Detection Complete!</h4>
                    <p>You can now detect when objects interact in your games!</p>
                </div>
            </div>
        </div>

        <!-- GAME TAB -->
        <div id="game" class="tab-content">
            <div class="section">
                <h2>üéÆ Complete Game: Catch the Falling Stars!</h2>
                <p style="font-size: 1.1em;">All concepts combined into one playable game!</p>

                <div class="interactive-demo">
                    <div class="demo-title">‚≠ê Catch the Falling Stars ‚≠ê</div>
                    
                    <div class="instructions">
                        Use ‚Üê ‚Üí Arrow Keys to catch stars! Avoid bombs! üí£
                    </div>
                    
                    <canvas id="gameCanvas" width="800" height="600"></canvas>
                    
                    <div class="game-info" id="gameStats">
                        Score: <span id="gameScore">0</span> | 
                        Lives: <span id="gameLives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span> | 
                        Level: <span id="gameLevel">1</span>
                    </div>
                    
                    <div class="controls">
                        <button onclick="startGame()">üéÆ Start Game</button>
                        <button onclick="pauseGame()">‚è∏Ô∏è Pause</button>
                        <button onclick="resetGame()">üîÑ Reset</button>
                    </div>
                </div>

                <div class="checkpoint">
                    <h4>‚úÖ Congratulations!</h4>
                    <p>You've built a complete browser game with:</p>
                    <ul style="padding-left: 20px; margin-top: 10px;">
                        <li>‚úì Smooth game loop running at 60 FPS</li>
                        <li>‚úì Responsive keyboard controls</li>
                        <li>‚úì Collision detection system</li>
                        <li>‚úì Scoring and lives system</li>
                        <li>‚úì Progressive difficulty</li>
                        <li>‚úì Game states (playing, paused, game over)</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>You're officially a game developer! üéÆ</strong></p>
                </div>

                <div class="tip">
                    <h4>üí° Take It Further</h4>
                    <ul style="padding-left: 20px;">
                        <li>Add power-ups (shields, slow motion, magnets)</li>
                        <li>Create multiple enemy types</li>
                        <li>Add sound effects and music</li>
                        <li>Implement high score tracking (localStorage)</li>
                        <li>Add particle effects for explosions</li>
                        <li>Create different game modes</li>
                    </ul>
                </div>
            </div>
        </div>

        <footer>
            <h3 style="margin-bottom: 10px;">üéÆ Code & Create Workshop</h3>
            <p>Session 3: Interactive Game Development</p>
            <p style="margin-top: 20px;">
                <a href="../session2/index.html">‚Üê Session 2</a> | 
                <a href="../index.html">Home</a> | 
                <a href="../session4/index.html">Session 4 ‚Üí</a>
            </p>
            <p style="margin-top: 20px; opacity: 0.8;">
                Every game starts with a single line of code! üöÄ
            </p>
        </footer>
    </div>

    <script>
        // ========================================
        // TAB NAVIGATION
        // ========================================
        function openTab(evt, tabName) {
            const tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }
            
            const tabButtons = document.getElementsByClassName('tab-btn');
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove('active');
            }
            
            document.getElementById(tabName).classList.add('active');
            evt.currentTarget.classList.add('active');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ========================================
        // GAME LOOP DEMO
        // ========================================
        const loopCanvas = document.getElementById('loopCanvas');
        const loopCtx = loopCanvas ? loopCanvas.getContext('2d') : null;
        let loopRunning = false;
        let loopX = 0;
        let loopFrame = 0;
        let loopFPS = 0;
        let loopLastTime = 0;

        function loopUpdate() {
            loopX += 3;
            if (loopX > loopCanvas.width + 40) {
                loopX = -40;
            }
            loopFrame++;
        }

        function loopDraw() {
            if (!loopCtx) return;
            
            loopCtx.fillStyle = '#000';
            loopCtx.fillRect(0, 0, loopCanvas.width, loopCanvas.height);
            
            // Draw moving ball
            loopCtx.fillStyle = '#4facfe';
            loopCtx.beginPath();
            loopCtx.arc(loopX, 200, 30, 0, Math.PI * 2);
            loopCtx.fill();
            
            // Draw trail
            loopCtx.fillStyle = 'rgba(79, 172, 254, 0.3)';
            for (let i = 1; i < 5; i++) {
                loopCtx.beginPath();
                loopCtx.arc(loopX - i * 20, 200, 30 - i * 5, 0, Math.PI * 2);
                loopCtx.fill();
            }
        }

        function loopGameLoop(timestamp) {
            if (!loopRunning) return;
            
            // Calculate FPS
            if (loopLastTime) {
                loopFPS = Math.round(1000 / (timestamp - loopLastTime));
            }
            loopLastTime = timestamp;
            
            loopUpdate();
            loopDraw();
            
            document.getElementById('fpsDisplay').textContent = loopFPS;
            document.getElementById('frameDisplay').textContent = loopFrame;
            
            requestAnimationFrame(loopGameLoop);
        }

        function startLoop() {
            if (!loopRunning) {
                loopRunning = true;
                loopFrame = 0;
                requestAnimationFrame(loopGameLoop);
            }
        }

        function stopLoop() {
            loopRunning = false;
        }

        // ========================================
        // MOVEMENT DEMO
        // ========================================
        const movementCanvas = document.getElementById('movementCanvas');
        const movementCtx = movementCanvas ? movementCanvas.getContext('2d') : null;
        let playerX = 400;
        let playerSpeed = 5;
        let keys = {};

        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
        });

        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        function movementUpdate() {
            if (keys['ArrowLeft']) {
                playerX -= playerSpeed;
            }
            if (keys['ArrowRight']) {
                playerX += playerSpeed;
            }
            
            // Boundaries
            if (playerX < 0) playerX = 0;
            if (playerX > movementCanvas.width - 60) playerX = movementCanvas.width - 60;
            
            document.getElementById('playerXDisplay').textContent = Math.round(playerX);
        }

        function movementDraw() {
            if (!movementCtx) return;
            
            movementCtx.fillStyle = '#000';
            movementCtx.fillRect(0, 0, movementCanvas.width, movementCanvas.height);
            
            // Draw player
            movementCtx.fillStyle = '#4facfe';
            movementCtx.fillRect(playerX, 320, 60, 60);
            
            // Draw controls hint
            movementCtx.fillStyle = 'rgba(255, 255, 255, 0.3)';
            movementCtx.font = '20px Arial';
            movementCtx.textAlign = 'center';
            movementCtx.fillText('‚Üê ‚Üí', movementCanvas.width / 2, 50);
        }

        function movementGameLoop() {
            movementUpdate();
            movementDraw();
            requestAnimationFrame(movementGameLoop);
        }

        if (movementCanvas) {
            movementGameLoop();
        }

        // ========================================
        // COLLISION DEMO
        // ========================================
        const collisionCanvas = document.getElementById('collisionCanvas');
        const collisionCtx = collisionCanvas ? collisionCanvas.getContext('2d') : null;
        let collisionPlayerX = 400;
        let collisionScore = 0;
        let missedCount = 0;
        let fallingObjects = [];

        function spawnFallingObject() {
            fallingObjects.push({
                x: Math.random() * (collisionCanvas.width - 30),
                y: -30,
                width: 30,
                height: 30,
                speed: 2 + Math.random() * 2
            });
        }

        function checkCollision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                   rect1.x + rect1.width > rect2.x &&
                   rect1.y < rect2.y + rect2.height &&
                   rect1.y + rect1.height > rect2.y;
        }

        function collisionUpdate() {
            // Player movement
            if (keys['ArrowLeft']) {
                collisionPlayerX -= 5;
            }
            if (keys['ArrowRight']) {
                collisionPlayerX += 5;
            }
            
            if (collisionPlayerX < 0) collisionPlayerX = 0;
            if (collisionPlayerX > collisionCanvas.width - 60) {
                collisionPlayerX = collisionCanvas.width - 60;
            }
            
            // Update falling objects
            for (let i = fallingObjects.length - 1; i >= 0; i--) {
                let obj = fallingObjects[i];
                obj.y += obj.speed;
                
                // Check collision with player
                let player = { x: collisionPlayerX, y: 320, width: 60, height: 60 };
                if (checkCollision(player, obj)) {
                    collisionScore += 10;
                    fallingObjects.splice(i, 1);
                    document.getElementById('collisionScore').textContent = collisionScore;
                    continue;
                }
                
                // Remove if off screen
                if (obj.y > collisionCanvas.height) {
                    missedCount++;
                    fallingObjects.splice(i, 1);
                    document.getElementById('missedCount').textContent = missedCount;
                }
            }
            
            // Spawn new objects randomly
            if (Math.random() < 0.02) {
                spawnFallingObject();
            }
        }

        function collisionDraw() {
            if (!collisionCtx) return;
            
            collisionCtx.fillStyle = '#000';
            collisionCtx.fillRect(0, 0, collisionCanvas.width, collisionCanvas.height);
            
            // Draw player
            collisionCtx.fillStyle = '#4facfe';
            collisionCtx.fillRect(collisionPlayerX, 320, 60, 60);
            
            // Draw falling objects
            collisionCtx.fillStyle = '#ffd700';
            for (let obj of fallingObjects) {
                collisionCtx.fillRect(obj.x, obj.y, obj.width, obj.height);
            }
        }

        function collisionGameLoop() {
            collisionUpdate();
            collisionDraw();
            requestAnimationFrame(collisionGameLoop);
        }

        if (collisionCanvas) {
            collisionGameLoop();
        }

        // ========================================
        // FULL GAME
        // ========================================
        const gameCanvas = document.getElementById('gameCanvas');
        const gameCtx = gameCanvas ? gameCanvas.getContext('2d') : null;
        let gameRunning = false;
        let gamePaused = false;
        let gamePlayerX = 400;
        let gameScore = 0;
        let gameLives = 3;
        let gameLevel = 1;
        let gameStars = [];
        let gameBombs = [];
        let gameSpawnTimer = 0;

        function spawnStar() {
            gameStars.push({
                x: Math.random() * (gameCanvas.width - 30),
                y: -30,
                width: 30,
                height: 30,
                speed: 2 + gameLevel * 0.5
            });
        }

        function spawnBomb() {
            gameBombs.push({
                x: Math.random() * (gameCanvas.width - 25),
                y: -25,
                width: 25,
                height: 25,
                speed: 3 + gameLevel * 0.3
            });
        }

        function gameUpdate() {
            if (!gameRunning || gamePaused) return;
            
            // Player movement
            if (keys['ArrowLeft']) {
                gamePlayerX -= 6;
            }
            if (keys['ArrowRight']) {
                gamePlayerX += 6;
            }
            
            if (gamePlayerX < 0) gamePlayerX = 0;
            if (gamePlayerX > gameCanvas.width - 70) {
                gamePlayerX = gameCanvas.width - 70;
            }
            
            // Update stars
            for (let i = gameStars.length - 1; i >= 0; i--) {
                let star = gameStars[i];
                star.y += star.speed;
                
                // Collision with player
                let player = { x: gamePlayerX, y: 520, width: 70, height: 70 };
                if (checkCollision(player, star)) {
                    gameScore += 10;
                    gameStars.splice(i, 1);
                    
                    // Level up every 100 points
                    if (gameScore % 100 === 0 && gameScore > 0) {
                        gameLevel++;
                        document.getElementById('gameLevel').textContent = gameLevel;
                    }
                    
                    document.getElementById('gameScore').textContent = gameScore;
                    continue;
                }
                
                // Remove if off screen
                if (star.y > gameCanvas.height) {
                    gameStars.splice(i, 1);
                }
            }
            
            // Update bombs
            for (let i = gameBombs.length - 1; i >= 0; i--) {
                let bomb = gameBombs[i];
                bomb.y += bomb.speed;
                
                // Collision with player
                let player = { x: gamePlayerX, y: 520, width: 70, height: 70 };
                if (checkCollision(player, bomb)) {
                    gameLives--;
                    gameBombs.splice(i, 1);
                    
                    let heartsDisplay = '';
                    for (let j = 0; j < gameLives; j++) {
                        heartsDisplay += '‚ù§Ô∏è';
                    }
                    document.getElementById('gameLives').textContent = heartsDisplay || 'üíÄ';
                    
                    if (gameLives <= 0) {
                        gameOver();
                    }
                    continue;
                }
                
                if (bomb.y > gameCanvas.height) {
                    gameBombs.splice(i, 1);
                }
            }
            
            // Spawn objects
            gameSpawnTimer++;
            if (gameSpawnTimer > 60 - gameLevel * 5) {
                if (Math.random() < 0.7) {
                    spawnStar();
                } else {
                    spawnBomb();
                }
                gameSpawnTimer = 0;
            }
        }

        function gameDraw() {
            if (!gameCtx) return;
            
            gameCtx.fillStyle = '#000';
            gameCtx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
            
            // Draw stars
            gameCtx.fillStyle = '#ffd700';
            for (let star of gameStars) {
                gameCtx.font = '30px Arial';
                gameCtx.fillText('‚≠ê', star.x, star.y + 30);
            }
            
            // Draw bombs
            for (let bomb of gameBombs) {
                gameCtx.font = '25px Arial';
                gameCtx.fillText('üí£', bomb.x, bomb.y + 25);
            }
            
            // Draw player
            gameCtx.font = '70px Arial';
            gameCtx.fillText('üéØ', gamePlayerX, 590);
            
            // Draw pause overlay
            if (gamePaused) {
                gameCtx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                gameCtx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
                gameCtx.fillStyle = '#fff';
                gameCtx.font = '60px Arial';
                gameCtx.textAlign = 'center';
                gameCtx.fillText('PAUSED', gameCanvas.width / 2, gameCanvas.height / 2);
                gameCtx.textAlign = 'left';
            }
        }

        function gameGameLoop() {
            gameUpdate();
            gameDraw();
            requestAnimationFrame(gameGameLoop);
        }

        function startGame() {
            if (!gameRunning) {
                gameRunning = true;
                gamePaused = false;
                gameScore = 0;
                gameLives = 3;
                gameLevel = 1;
                gamePlayerX = 400;
                gameStars = [];
                gameBombs = [];
                gameSpawnTimer = 0;
                
                document.getElementById('gameScore').textContent = '0';
                document.getElementById('gameLives').textContent = '‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è';
                document.getElementById('gameLevel').textContent = '1';
                
                gameGameLoop();
            } else {
                gamePaused = false;
            }
        }

        function pauseGame() {
            gamePaused = !gamePaused;
        }

        function resetGame() {
            gameRunning = false;
            gamePaused = false;
            gameStars = [];
            gameBombs = [];
            if (gameCtx) {
                gameCtx.fillStyle = '#000';
                gameCtx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
                gameCtx.fillStyle = '#fff';
                gameCtx.font = '40px Arial';
                gameCtx.textAlign = 'center';
                gameCtx.fillText('Click "Start Game" to play!', gameCanvas.width / 2, gameCanvas.height / 2);
                gameCtx.textAlign = 'left';
            }
        }

        function gameOver() {
            gameRunning = false;
            if (gameCtx) {
                gameCtx.fillStyle = 'rgba(0, 0, 0, 0.8)';
                gameCtx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
                gameCtx.fillStyle = '#ff4444';
                gameCtx.font = '60px Arial';
                gameCtx.textAlign = 'center';
                gameCtx.fillText('GAME OVER', gameCanvas.width / 2, gameCanvas.height / 2 - 30);
                gameCtx.fillStyle = '#fff';
                gameCtx.font = '30px Arial';
                gameCtx.fillText(`Final Score: ${gameScore}`, gameCanvas.width / 2, gameCanvas.height / 2 + 30);
                gameCtx.fillText('Click "Start Game" to play again', gameCanvas.width / 2, gameCanvas.height / 2 + 80);
                gameCtx.textAlign = 'left';
            }
        }

        // Initialize game canvas
        if (gameCanvas) {
            resetGame();
        }

        // ========================================
        // INITIALIZATION
        // ========================================
        console.log('üéÆ Session 3: Game Development loaded!');
        console.log('üí° Build amazing games with code!');
    </script>
</body>
</html>