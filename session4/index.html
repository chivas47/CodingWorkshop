<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéµ</text></svg>">
    <meta name="description" content="Session 4: Music Visualizer - Create visuals that dance to music using the Web Audio API!">
    <title>Session 4: Music Visualizer | Code & Create Workshop</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #43e97b;
            --secondary: #38f9d7;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1f2937;
            --gray: #6b7280;
            --light: #f3f4f6;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: var(--light);
        }

        .workshop-nav {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 1001;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .workshop-nav a {
            color: white;
            text-decoration: none;
            margin: 0 15px;
            opacity: 0.9;
            font-weight: 600;
        }

        .workshop-nav a:hover {
            opacity: 1;
            text-decoration: underline;
        }

        .workshop-nav .current {
            opacity: 1;
            border-bottom: 2px solid white;
            padding-bottom: 2px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 60px 20px 40px 20px;
            text-align: center;
        }

        header h1 {
            font-size: 3em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.3em;
            opacity: 0.95;
        }

        .session-info {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .info-badge {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
        }

        .tabs {
            display: flex;
            background: var(--dark);
            overflow-x: auto;
            position: sticky;
            top: 52px;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .tab-btn {
            flex: 1;
            min-width: 120px;
            background: none;
            border: none;
            color: white;
            padding: 18px 15px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 600;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab-btn:hover {
            background: rgba(255,255,255,0.1);
        }

        .tab-btn.active {
            background: rgba(255,255,255,0.15);
            border-bottom-color: var(--primary);
        }

        .tab-number {
            display: block;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .tab-content {
            display: none;
            padding: 40px 20px;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: var(--primary);
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--primary);
        }

        .section h3 {
            color: var(--dark);
            font-size: 1.5em;
            margin: 30px 0 15px 0;
        }

        .concept-box {
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid var(--primary);
        }

        .concept-box h3 {
            color: var(--primary);
            margin-top: 0;
        }

        .code-example {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            position: relative;
        }

        .code-example pre {
            margin: 0;
            white-space: pre-wrap;
        }

        .code-label {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--primary);
            color: white;
            padding: 4px 12px;
            border-radius: 5px;
            font-size: 0.85em;
        }

        .interactive-demo {
            background: white;
            border: 3px solid var(--primary);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .demo-title {
            text-align: center;
            color: var(--primary);
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .checkpoint {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #3b82f6;
            margin: 20px 0;
        }

        .checkpoint h4 {
            color: #1e3a8a;
            margin-bottom: 10px;
        }

        .tip {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid var(--warning);
            margin: 20px 0;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            background: var(--primary);
            color: white;
            font-weight: bold;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            margin: 5px;
        }

        button:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(67, 233, 123, 0.3);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
        }

        canvas {
            border: 4px solid var(--dark);
            border-radius: 10px;
            display: block;
            margin: 20px auto;
            background: #000;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            max-width: 100%;
            height: auto;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        input[type="file"] {
            display: none;
        }

        .file-upload-btn {
            background: var(--secondary);
            cursor: pointer;
            display: inline-block;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: bold;
            color: white;
            transition: all 0.3s;
        }

        .file-upload-btn:hover {
            background: var(--primary);
            transform: translateY(-2px);
        }

        .visualizer-container {
            background: #000;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        footer {
            background: var(--dark);
            color: white;
            padding: 40px 20px;
            text-align: center;
        }

        footer a {
            color: var(--primary);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }

            .tabs {
                position: relative;
                top: 0;
            }

            .workshop-nav {
                position: relative;
            }

            .tab-btn {
                font-size: 0.85em;
                padding: 12px 10px;
            }

            canvas {
                width: 100%;
                height: auto;
            }

            .workshop-nav a {
                display: block;
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>
    <!-- Workshop Navigation -->
    <div class="workshop-nav">
        <strong>üéµ Code & Create Workshop</strong>
        <span style="opacity: 0.8;"> | </span>
        <a href="../index.html">Home</a>
        <a href="../session1/index.html">Session 1</a>
        <a href="../session2/index.html">Session 2</a>
        <a href="../session3/index.html">Session 3</a>
        <a href="../session4/index.html" class="current">Session 4</a>
    </div>

    <div class="container">
        <header>
            <h1>üéµ Session 4: Music Visualizer</h1>
            <p>Create Visuals That Dance to Music</p>
            <div class="session-info">
                <div class="info-badge">‚è±Ô∏è 150 minutes</div>
                <div class="info-badge">üé® Audio + Visuals</div>
                <div class="info-badge">üéß Web Audio API</div>
            </div>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="openTab(event, 'intro')">
                <span class="tab-number">üëã</span>
                Intro
            </button>
            <button class="tab-btn" onclick="openTab(event, 'audio-api')">
                <span class="tab-number">üéß</span>
                Audio API
            </button>
            <button class="tab-btn" onclick="openTab(event, 'frequency')">
                <span class="tab-number">üìä</span>
                Frequency
            </button>
            <button class="tab-btn" onclick="openTab(event, 'visualizations')">
                <span class="tab-number">üåà</span>
                Visualizations
            </button>
            <button class="tab-btn" onclick="openTab(event, 'final')">
                <span class="tab-number">üé®</span>
                Final Project
            </button>
        </div>

        <!-- INTRO TAB -->
        <div id="intro" class="tab-content active">
            <div class="section">
                <h2>üëã Welcome to Audio Visualization!</h2>
                <p style="font-size: 1.2em; line-height: 1.8;">
                    Today you'll learn to create <strong>music visualizers</strong> - visual effects that react to sound!
                    Combine everything you've learned to build something truly magical.
                </p>
            </div>

            <div class="concept-box">
                <h3>üéµ What is a Music Visualizer?</h3>
                <p style="font-size: 1.1em; line-height: 1.8;">
                    Music visualizers analyze audio in real-time and create visual representations of sound.
                    Think of what you see in Spotify, music players, or concert visuals - that's what we're building!
                </p>
            </div>

            <div class="section">
                <h3>üéØ What You'll Learn Today</h3>
                <ul style="padding-left: 40px; line-height: 2; font-size: 1.1em;">
                    <li><strong>Web Audio API:</strong> Access and analyze audio data</li>
                    <li><strong>Frequency Analysis:</strong> Break sound into frequencies</li>
                    <li><strong>Real-time Visualization:</strong> Draw based on audio</li>
                    <li><strong>Multiple Visual Modes:</strong> Bars, circles, waveforms, particles</li>
                    <li><strong>Interactive Controls:</strong> Upload your own music!</li>
                </ul>
            </div>

            <div class="checkpoint">
                <h4>‚úÖ By the End of Today</h4>
                <p>You'll be able to:</p>
                <ul style="padding-left: 20px; margin-top: 10px;">
                    <li>‚úì Use the Web Audio API to analyze music</li>
                    <li>‚úì Extract frequency data from audio</li>
                    <li>‚úì Create multiple visualization styles</li>
                    <li>‚úì Build a complete music visualizer app</li>
                    <li>‚úì Upload and visualize your own music! üéµ</li>
                </ul>
            </div>

            <div class="tip">
                <h4>üí° Bringing It All Together</h4>
                <p>This session combines EVERYTHING from the workshop:</p>
                <ul style="padding-left: 20px; margin-top: 10px;">
                    <li>Session 1: Variables, Functions, Events</li>
                    <li>Session 2: Loops, Randomness, Patterns</li>
                    <li>Session 3: Game Loops, Real-time Updates</li>
                    <li>Session 4: Web Audio API + All of the Above!</li>
                </ul>
            </div>
        </div>

        <!-- AUDIO API TAB -->
        <div id="audio-api" class="tab-content">
            <div class="section">
                <h2>üéß Web Audio API: Accessing Sound Data</h2>

                <div class="concept-box">
                    <h3>What is the Web Audio API?</h3>
                    <p style="font-size: 1.1em; line-height: 1.8;">
                        The Web Audio API lets you process and analyze audio in the browser.
                        It can break down music into individual frequencies - perfect for visualizations!
                    </p>
                </div>

                <h3>üíª Setting Up Audio Context</h3>

                <div class="code-example">
                    <div class="code-label">JavaScript</div>
                    <pre>// Step 1: Create an audio context
const audioContext = new (window.AudioContext || window.webkitAudioContext)();

// Step 2: Create an analyser node
const analyser = audioContext.createAnalyser();
analyser.fftSize = 256;  // How many frequency bands to analyze

// Step 3: Get frequency data array
const bufferLength = analyser.frequencyBinCount;
const dataArray = new Uint8Array(bufferLength);

// Now we can get frequency data!
analyser.getByteFrequencyData(dataArray);</pre>
                </div>

                <div class="tip">
                    <h4>üí° Key Concepts</h4>
                    <ul style="padding-left: 20px; line-height: 1.8;">
                        <li><strong>AudioContext:</strong> The main audio processing environment</li>
                        <li><strong>Analyser:</strong> Extracts frequency/waveform data</li>
                        <li><strong>FFT Size:</strong> How detailed the analysis is (32-32768)</li>
                        <li><strong>dataArray:</strong> Contains the frequency values (0-255)</li>
                    </ul>
                </div>

                <h3>üíª Connecting Audio Source</h3>

                <div class="code-example">
                    <div class="code-label">JavaScript - HTML Audio Element</div>
                    <pre>// HTML: <audio id="myAudio" src="song.mp3"></audio>

const audio = document.getElementById('myAudio');

// Create source from audio element
const source = audioContext.createMediaElementSource(audio);

// Connect: source ‚Üí analyser ‚Üí speakers
source.connect(analyser);
analyser.connect(audioContext.destination);

// Play the audio
audio.play();</pre>
                </div>

                <div class="code-example">
                    <div class="code-label">JavaScript - File Upload</div>
                    <pre>// When user uploads a file
fileInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    const fileURL = URL.createObjectURL(file);
    
    audio.src = fileURL;
    audio.play();
});</pre>
                </div>

                <h3>üé® Interactive Demo: Audio Setup</h3>

                <div class="interactive-demo">
                    <div class="demo-title">Test Audio Context</div>
                    
                    <audio id="testAudio" style="width: 100%; margin: 20px 0;"></audio>
                    
                    <div class="controls">
                        <label class="file-upload-btn">
                            üìÅ Upload Music File
                            <input type="file" id="testFileUpload" accept="audio/*">
                        </label>
                        <button onclick="playTestAudio()">‚ñ∂Ô∏è Play</button>
                        <button onclick="pauseTestAudio()">‚è∏Ô∏è Pause</button>
                    </div>
                    
                    <p style="text-align: center; margin-top: 15px; color: var(--gray);">
                        Upload an MP3 or other audio file to test!
                    </p>
                </div>

                <div class="checkpoint">
                    <h4>‚úÖ Audio API Setup Complete!</h4>
                    <p>You can now access and control audio in the browser!</p>
                </div>
            </div>
        </div>

        <!-- FREQUENCY TAB -->
        <div id="frequency" class="tab-content">
            <div class="section">
                <h2>üìä Frequency Analysis: Breaking Down Sound</h2>

                <div class="concept-box">
                    <h3>What is Frequency Data?</h3>
                    <p style="font-size: 1.1em; line-height: 1.8;">
                        Sound is made up of different frequencies (pitches). 
                        The analyser breaks music into frequency bands - bass (low), mids, treble (high).
                        Each band has a value (0-255) showing how loud it is!
                    </p>
                </div>

                <h3>üíª Getting Frequency Data</h3>

                <div class="code-example">
                    <div class="code-label">JavaScript</div>
                    <pre>// In your animation loop:
function visualize() {
    // Get current frequency data
    analyser.getByteFrequencyData(dataArray);
    
    // dataArray now contains frequency values!
    // dataArray[0] = first frequency band (bass)
    // dataArray[64] = middle frequencies
    // dataArray[127] = high frequencies (treble)
    
    // Each value is 0-255 (0 = silent, 255 = loudest)
    
    requestAnimationFrame(visualize);
}</pre>
                </div>

                <div class="tip">
                    <h4>üí° Understanding the Data</h4>
                    <ul style="padding-left: 20px; line-height: 1.8;">
                        <li><strong>Lower indices (0-40):</strong> Bass frequencies üîä</li>
                        <li><strong>Middle indices (40-80):</strong> Mids (vocals, guitars) üé∏</li>
                        <li><strong>Higher indices (80-128):</strong> Treble (cymbals, hi-hats) ü•Å</li>
                        <li><strong>Value (0-255):</strong> Loudness of that frequency</li>
                    </ul>
                </div>

                <h3>üé® Interactive Demo: Frequency Bars</h3>

                <div class="interactive-demo">
                    <div class="demo-title">See Frequency Data in Real-Time</div>
                    
                    <canvas id="frequencyCanvas" width="800" height="300"></canvas>
                    
                    <audio id="freqAudio" style="width: 100%; margin: 20px 0;"></audio>
                    
                    <div class="controls">
                        <label class="file-upload-btn">
                            üìÅ Upload Music
                            <input type="file" id="freqFileUpload" accept="audio/*">
                        </label>
                        <button onclick="playFreqAudio()">‚ñ∂Ô∏è Play</button>
                        <button onclick="pauseFreqAudio()">‚è∏Ô∏è Pause</button>
                    </div>
                </div>

                <h3>üíª Drawing Frequency Bars</h3>

                <div class="code-example">
                    <div class="code-label">JavaScript</div>
                    <pre>function drawBars() {
    // Get frequency data
    analyser.getByteFrequencyData(dataArray);
    
    // Clear canvas
    ctx.fillStyle = 'black';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // Calculate bar width
    const barWidth = canvas.width / bufferLength;
    
    // Draw each frequency as a bar
    for (let i = 0; i < bufferLength; i++) {
        const barHeight = (dataArray[i] / 255) * canvas.height;
        const x = i * barWidth;
        const y = canvas.height - barHeight;
        
        // Color based on frequency
        const hue = (i / bufferLength) * 360;
        ctx.fillStyle = `hsl(${hue}, 100%, 50%)`;
        
        ctx.fillRect(x, y, barWidth - 2, barHeight);
    }
}</pre>
                </div>

                <div class="checkpoint">
                    <h4>‚úÖ Frequency Analysis Mastered!</h4>
                    <p>You can now extract and visualize audio frequency data!</p>
                </div>
            </div>
        </div>

        <!-- VISUALIZATIONS TAB -->
        <div id="visualizations" class="tab-content">
            <div class="section">
                <h2>üåà Different Visualization Styles</h2>

                <div class="concept-box">
                    <h3>Multiple Ways to Visualize Sound</h3>
                    <p style="font-size: 1.1em; line-height: 1.8;">
                        The same audio data can create completely different visual experiences!
                        Let's explore bars, circles, waveforms, and particles.
                    </p>
                </div>

                <h3>üé® Interactive Demo: Visualization Modes</h3>

                <div class="interactive-demo">
                    <div class="demo-title">Choose Your Visualization Style</div>
                    
                    <canvas id="vizCanvas" width="800" height="500"></canvas>
                    
                    <audio id="vizAudio" style="width: 100%; margin: 20px 0;"></audio>
                    
                    <div class="controls">
                        <label class="file-upload-btn">
                            üìÅ Upload Music
                            <input type="file" id="vizFileUpload" accept="audio/*">
                        </label>
                        <button onclick="playVizAudio()">‚ñ∂Ô∏è Play</button>
                        <button onclick="pauseVizAudio()">‚è∏Ô∏è Pause</button>
                    </div>
                    
                    <div class="controls">
                        <button onclick="setVizMode('bars')">üìä Bars</button>
                        <button onclick="setVizMode('circle')">‚≠ï Circle</button>
                        <button onclick="setVizMode('wave')">„Ä∞Ô∏è Waveform</button>
                        <button onclick="setVizMode('particles')">‚ú® Particles</button>
                    </div>
                </div>

                <h3>üíª Circle Visualization</h3>

                <div class="code-example">
                    <div class="code-label">JavaScript</div>
                    <pre>function drawCircle() {
    analyser.getByteFrequencyData(dataArray);
    
    ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const radius = 100;
    
    for (let i = 0; i < bufferLength; i++) {
        const angle = (i / bufferLength) * Math.PI * 2;
        const barLength = (dataArray[i] / 255) * 100;
        
        const x = centerX + Math.cos(angle) * radius;
        const y = centerY + Math.sin(angle) * radius;
        const x2 = centerX + Math.cos(angle) * (radius + barLength);
        const y2 = centerY + Math.sin(angle) * (radius + barLength);
        
        ctx.strokeStyle = `hsl(${(i / bufferLength) * 360}, 100%, 50%)`;
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(x, y);
        ctx.lineTo(x2, y2);
        ctx.stroke();
    }
}</pre>
                </div>

                <h3>üíª Particle Visualization</h3>

                <div class="code-example">
                    <div class="code-label">JavaScript</div>
                    <pre>let particles = [];

function createParticle(x, y, intensity) {
    particles.push({
        x: x,
        y: y,
        vx: (Math.random() - 0.5) * intensity,
        vy: (Math.random() - 0.5) * intensity,
        life: 1.0,
        size: Math.random() * 5 + 2
    });
}

function drawParticles() {
    analyser.getByteFrequencyData(dataArray);
    
    ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // Create new particles based on audio
    for (let i = 0; i < bufferLength; i += 5) {
        if (dataArray[i] > 128) {
            const x = (i / bufferLength) * canvas.width;
            const y = canvas.height / 2;
            createParticle(x, y, dataArray[i] / 50);
        }
    }
    
    // Update and draw particles
    for (let i = particles.length - 1; i >= 0; i--) {
        const p = particles[i];
        p.x += p.vx;
        p.y += p.vy;
        p.life -= 0.02;
        
        if (p.life <= 0) {
            particles.splice(i, 1);
            continue;
        }
        
        ctx.fillStyle = `hsla(${p.life * 120}, 100%, 50%, ${p.life})`;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        ctx.fill();
    }
}</pre>
                </div>

                <div class="checkpoint">
                    <h4>‚úÖ Multiple Visualizations Complete!</h4>
                    <p>You can now create different visual styles from the same audio!</p>
                </div>
            </div>
        </div>

        <!-- FINAL PROJECT TAB -->
        <div id="final" class="tab-content">
            <div class="section">
                <h2>üé® Final Project: Complete Music Visualizer</h2>
                <p style="font-size: 1.1em;">Your ultimate audio-reactive visual experience!</p>

                <div class="interactive-demo">
                    <div class="demo-title">üéµ Your Music Visualizer üéµ</div>
                    
                    <div class="visualizer-container">
                        <canvas id="finalCanvas" width="800" height="500"></canvas>
                    </div>
                    
                    <audio id="finalAudio" controls style="width: 100%; margin: 20px 0;"></audio>
                    
                    <div class="controls">
                        <label class="file-upload-btn">
                            üìÅ Upload Your Music
                            <input type="file" id="finalFileUpload" accept="audio/*">
                        </label>
                    </div>
                    
                    <div class="controls">
                        <button onclick="setFinalMode('bars')">üìä Frequency Bars</button>
                        <button onclick="setFinalMode('circle')">‚≠ï Radial</button>
                        <button onclick="setFinalMode('wave')">„Ä∞Ô∏è Waveform</button>
                        <button onclick="setFinalMode('particles')">‚ú® Particles</button>
                        <button onclick="setFinalMode('combo')">üåà Combo</button>
                    </div>
                    
                    <p style="text-align: center; margin-top: 15px; color: white;">
                        Upload an audio file and choose your visualization style!
                    </p>
                </div>

                <div class="checkpoint">
                    <h4>üéâ Congratulations - Workshop Complete!</h4>
                    <p>You've built a complete music visualizer that combines:</p>
                    <ul style="padding-left: 20px; margin-top: 10px;">
                        <li>‚úì <strong>Session 1:</strong> Variables, Functions, DOM Manipulation</li>
                        <li>‚úì <strong>Session 2:</strong> Loops, Arrays, Patterns, Randomness</li>
                        <li>‚úì <strong>Session 3:</strong> Animation Loops, Real-time Updates</li>
                        <li>‚úì <strong>Session 4:</strong> Web Audio API, Frequency Analysis</li>
                    </ul>
                    <p style="margin-top: 15px; font-size: 1.2em;"><strong>You're now a creative coder! üé®üéµüöÄ</strong></p>
                </div>

                <div class="tip">
                    <h4>üí° What's Next?</h4>
                    <ul style="padding-left: 20px;">
                        <li>Add more visualization modes (3D with Three.js!)</li>
                        <li>Create custom color schemes</li>
                        <li>Add sensitivity/gain controls</li>
                        <li>Implement fullscreen mode</li>
                        <li>Save visualizations as video</li>
                        <li>Share your creations with friends!</li>
                    </ul>
                </div>

                <div class="concept-box">
                    <h3>üåü You've Learned SO Much!</h3>
                    <p style="font-size: 1.1em; line-height: 1.8;">
                        From zero coding experience to building interactive art, games, and music visualizers.
                        These are the exact same tools professional developers use every day.
                    </p>
                    <p style="margin-top: 15px; font-size: 1.2em; font-weight: bold;">
                        Keep creating, keep experimenting, keep coding! üíª‚ú®
                    </p>
                </div>
            </div>
        </div>

        <footer>
            <h3 style="margin-bottom: 10px;">üéµ Code & Create Workshop</h3>
            <p>Session 4: Music Visualizer - Final Session</p>
            <p style="margin-top: 20px;">
                <a href="../session3/index.html">‚Üê Session 3</a> | 
                <a href="../index.html">Home</a>
            </p>
            <p style="margin-top: 20px; opacity: 0.8;">
                Thank you for joining this creative coding journey! üé®üéµüöÄ
            </p>
        </footer>
    </div>

    <script>
        // ========================================
        // TAB NAVIGATION
        // ========================================
        function openTab(evt, tabName) {
            const tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }
            
            const tabButtons = document.getElementsByClassName('tab-btn');
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove('active');
            }
            
            document.getElementById(tabName).classList.add('active');
            evt.currentTarget.classList.add('active');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ========================================
        // AUDIO SETUP
        // ========================================
        let audioContext = null;
        let analyser = null;
        let dataArray = null;
        let bufferLength = 0;

        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioContext.createAnalyser();
                analyser.fftSize = 256;
                bufferLength = analyser.frequencyBinCount;
                dataArray = new Uint8Array(bufferLength);
            }
        }

        function connectAudio(audioElement) {
            initAudio();
            
            if (!audioElement.sourceNode) {
                const source = audioContext.createMediaElementSource(audioElement);
                source.connect(analyser);
                analyser.connect(audioContext.destination);
                audioElement.sourceNode = source;
            }
        }

        // ========================================
        // TEST AUDIO DEMO
        // ========================================
        const testAudio = document.getElementById('testAudio');
        const testFileUpload = document.getElementById('testFileUpload');

        if (testFileUpload) {
            testFileUpload.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const fileURL = URL.createObjectURL(file);
                    testAudio.src = fileURL;
                    connectAudio(testAudio);
                }
            });
        }

        function playTestAudio() {
            if (testAudio.src) {
                testAudio.play();
            } else {
                alert('Please upload an audio file first!');
            }
        }

        function pauseTestAudio() {
            testAudio.pause();
        }

        // ========================================
        // FREQUENCY VISUALIZATION
        // ========================================
        const frequencyCanvas = document.getElementById('frequencyCanvas');
        const freqCtx = frequencyCanvas ? frequencyCanvas.getContext('2d') : null;
        const freqAudio = document.getElementById('freqAudio');
        const freqFileUpload = document.getElementById('freqFileUpload');
        let freqAnimating = false;

        if (freqFileUpload) {
            freqFileUpload.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const fileURL = URL.createObjectURL(file);
                    freqAudio.src = fileURL;
                    connectAudio(freqAudio);
                }
            });
        }

        function drawFrequencyBars() {
            if (!freqAnimating || !freqCtx) return;
            
            analyser.getByteFrequencyData(dataArray);
            
            freqCtx.fillStyle = '#000';
            freqCtx.fillRect(0, 0, frequencyCanvas.width, frequencyCanvas.height);
            
            const barWidth = frequencyCanvas.width / bufferLength;
            
            for (let i = 0; i < bufferLength; i++) {
                const barHeight = (dataArray[i] / 255) * frequencyCanvas.height;
                const x = i * barWidth;
                const y = frequencyCanvas.height - barHeight;
                
                const hue = (i / bufferLength) * 360;
                freqCtx.fillStyle = `hsl(${hue}, 100%, 50%)`;
                freqCtx.fillRect(x, y, barWidth - 2, barHeight);
            }
            
            requestAnimationFrame(drawFrequencyBars);
        }

        function playFreqAudio() {
            if (freqAudio.src) {
                freqAudio.play();
                freqAnimating = true;
                drawFrequencyBars();
            } else {
                alert('Please upload an audio file first!');
            }
        }

        function pauseFreqAudio() {
            freqAudio.pause();
            freqAnimating = false;
        }

        // ========================================
        // MULTIPLE VISUALIZATIONS
        // ========================================
        const vizCanvas = document.getElementById('vizCanvas');
        const vizCtx = vizCanvas ? vizCanvas.getContext('2d') : null;
        const vizAudio = document.getElementById('vizAudio');
        const vizFileUpload = document.getElementById('vizFileUpload');
        let vizAnimating = false;
        let vizMode = 'bars';
        let particles = [];

        if (vizFileUpload) {
            vizFileUpload.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const fileURL = URL.createObjectURL(file);
                    vizAudio.src = fileURL;
                    connectAudio(vizAudio);
                }
            });
        }

        function setVizMode(mode) {
            vizMode = mode;
            particles = [];
        }

        function drawVizBars() {
            analyser.getByteFrequencyData(dataArray);
            
            vizCtx.fillStyle = '#000';
            vizCtx.fillRect(0, 0, vizCanvas.width, vizCanvas.height);
            
            const barWidth = vizCanvas.width / bufferLength;
            
            for (let i = 0; i < bufferLength; i++) {
                const barHeight = (dataArray[i] / 255) * vizCanvas.height;
                const x = i * barWidth;
                const y = vizCanvas.height - barHeight;
                
                const hue = (i / bufferLength) * 360;
                vizCtx.fillStyle = `hsl(${hue}, 100%, 50%)`;
                vizCtx.fillRect(x, y, barWidth - 2, barHeight);
            }
        }

        function drawVizCircle() {
            analyser.getByteFrequencyData(dataArray);
            
            vizCtx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            vizCtx.fillRect(0, 0, vizCanvas.width, vizCanvas.height);
            
            const centerX = vizCanvas.width / 2;
            const centerY = vizCanvas.height / 2;
            const radius = 100;
            
            for (let i = 0; i < bufferLength; i++) {
                const angle = (i / bufferLength) * Math.PI * 2;
                const barLength = (dataArray[i] / 255) * 150;
                
                const x1 = centerX + Math.cos(angle) * radius;
                const y1 = centerY + Math.sin(angle) * radius;
                const x2 = centerX + Math.cos(angle) * (radius + barLength);
                const y2 = centerY + Math.sin(angle) * (radius + barLength);
                
                vizCtx.strokeStyle = `hsl(${(i / bufferLength) * 360}, 100%, 50%)`;
                vizCtx.lineWidth = 3;
                vizCtx.beginPath();
                vizCtx.moveTo(x1, y1);
                vizCtx.lineTo(x2, y2);
                vizCtx.stroke();
            }
        }

        function drawVizWave() {
            const waveData = new Uint8Array(analyser.fftSize);
            analyser.getByteTimeDomainData(waveData);
            
            vizCtx.fillStyle = '#000';
            vizCtx.fillRect(0, 0, vizCanvas.width, vizCanvas.height);
            
            vizCtx.lineWidth = 3;
            vizCtx.strokeStyle = '#43e97b';
            vizCtx.beginPath();
            
            const sliceWidth = vizCanvas.width / waveData.length;
            let x = 0;
            
            for (let i = 0; i < waveData.length; i++) {
                const v = waveData[i] / 128.0;
                const y = v * vizCanvas.height / 2;
                
                if (i === 0) {
                    vizCtx.moveTo(x, y);
                } else {
                    vizCtx.lineTo(x, y);
                }
                
                x += sliceWidth;
            }
            
            vizCtx.stroke();
        }

        function drawVizParticles() {
            analyser.getByteFrequencyData(dataArray);
            
            vizCtx.fillStyle = 'rgba(0, 0, 0, 0.2)';
            vizCtx.fillRect(0, 0, vizCanvas.width, vizCanvas.height);
            
            for (let i = 0; i < bufferLength; i += 3) {
                if (dataArray[i] > 140) {
                    const x = (i / bufferLength) * vizCanvas.width;
                    const y = vizCanvas.height / 2;
                    const intensity = dataArray[i] / 50;
                    
                    particles.push({
                        x: x,
                        y: y,
                        vx: (Math.random() - 0.5) * intensity,
                        vy: (Math.random() - 0.5) * intensity,
                        life: 1.0,
                        size: Math.random() * 4 + 2
                    });
                }
            }
            
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.life -= 0.015;
                
                if (p.life <= 0) {
                    particles.splice(i, 1);
                    continue;
                }
                
                vizCtx.fillStyle = `hsla(${p.life * 120 + 120}, 100%, 50%, ${p.life})`;
                vizCtx.beginPath();
                vizCtx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                vizCtx.fill();
            }
        }

        function visualizeViz() {
            if (!vizAnimating || !vizCtx) return;
            
            switch(vizMode) {
                case 'bars':
                    drawVizBars();
                    break;
                case 'circle':
                    drawVizCircle();
                    break;
                case 'wave':
                    drawVizWave();
                    break;
                case 'particles':
                    drawVizParticles();
                    break;
            }
            
            requestAnimationFrame(visualizeViz);
        }

        function playVizAudio() {
            if (vizAudio.src) {
                vizAudio.play();
                vizAnimating = true;
                visualizeViz();
            } else {
                alert('Please upload an audio file first!');
            }
        }

        function pauseVizAudio() {
            vizAudio.pause();
            vizAnimating = false;
        }

        // ========================================
        // FINAL VISUALIZER
        // ========================================
        const finalCanvas = document.getElementById('finalCanvas');
        const finalCtx = finalCanvas ? finalCanvas.getContext('2d') : null;
        const finalAudio = document.getElementById('finalAudio');
        const finalFileUpload = document.getElementById('finalFileUpload');
        let finalAnimating = false;
        let finalMode = 'bars';
        let finalParticles = [];

        if (finalFileUpload) {
            finalFileUpload.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const fileURL = URL.createObjectURL(file);
                    finalAudio.src = fileURL;
                    connectAudio(finalAudio);
                    finalAudio.play();
                    finalAnimating = true;
                    visualizeFinal();
                }
            });
        }

        if (finalAudio) {
            finalAudio.addEventListener('play', () => {
                finalAnimating = true;
                visualizeFinal();
            });
            
            finalAudio.addEventListener('pause', () => {
                finalAnimating = false;
            });
        }

        function setFinalMode(mode) {
            finalMode = mode;
            finalParticles = [];
        }

        function visualizeFinal() {
            if (!finalAnimating || !finalCtx) return;
            
            switch(finalMode) {
                case 'bars':
                    drawFinalBars();
                    break;
                case 'circle':
                    drawFinalCircle();
                    break;
                case 'wave':
                    drawFinalWave();
                    break;
                case 'particles':
                    drawFinalParticles();
                    break;
                case 'combo':
                    drawFinalCombo();
                    break;
            }
            
            requestAnimationFrame(visualizeFinal);
        }

        function drawFinalBars() {
            analyser.getByteFrequencyData(dataArray);
            
            finalCtx.fillStyle = '#000';
            finalCtx.fillRect(0, 0, finalCanvas.width, finalCanvas.height);
            
            const barWidth = finalCanvas.width / bufferLength;
            
            for (let i = 0; i < bufferLength; i++) {
                const barHeight = (dataArray[i] / 255) * finalCanvas.height;
                const x = i * barWidth;
                const y = finalCanvas.height - barHeight;
                
                const gradient = finalCtx.createLinearGradient(0, y, 0, finalCanvas.height);
                gradient.addColorStop(0, `hsl(${(i / bufferLength) * 360}, 100%, 50%)`);
                gradient.addColorStop(1, `hsl(${(i / bufferLength) * 360 + 60}, 100%, 30%)`);
                
                finalCtx.fillStyle = gradient;
                finalCtx.fillRect(x, y, barWidth - 2, barHeight);
            }
        }

        function drawFinalCircle() {
            analyser.getByteFrequencyData(dataArray);
            
            finalCtx.fillStyle = 'rgba(0, 0, 0, 0.15)';
            finalCtx.fillRect(0, 0, finalCanvas.width, finalCanvas.height);
            
            const centerX = finalCanvas.width / 2;
            const centerY = finalCanvas.height / 2;
            const radius = 80;
            
            for (let i = 0; i < bufferLength; i++) {
                const angle = (i / bufferLength) * Math.PI * 2;
                const barLength = (dataArray[i] / 255) * 180;
                
                const x1 = centerX + Math.cos(angle) * radius;
                const y1 = centerY + Math.sin(angle) * radius;
                const x2 = centerX + Math.cos(angle) * (radius + barLength);
                const y2 = centerY + Math.sin(angle) * (radius + barLength);
                
                finalCtx.strokeStyle = `hsl(${(i / bufferLength) * 360}, 100%, 50%)`;
                finalCtx.lineWidth = 4;
                finalCtx.beginPath();
                finalCtx.moveTo(x1, y1);
                finalCtx.lineTo(x2, y2);
                finalCtx.stroke();
            }
        }

        function drawFinalWave() {
            const waveData = new Uint8Array(analyser.fftSize);
            analyser.getByteTimeDomainData(waveData);
            
            finalCtx.fillStyle = '#000';
            finalCtx.fillRect(0, 0, finalCanvas.width, finalCanvas.height);
            
            finalCtx.lineWidth = 4;
            
            const gradient = finalCtx.createLinearGradient(0, 0, finalCanvas.width, 0);
            gradient.addColorStop(0, '#43e97b');
            gradient.addColorStop(0.5, '#38f9d7');
            gradient.addColorStop(1, '#43e97b');
            finalCtx.strokeStyle = gradient;
            
            finalCtx.beginPath();
            
            const sliceWidth = finalCanvas.width / waveData.length;
            let x = 0;
            
            for (let i = 0; i < waveData.length; i++) {
                const v = waveData[i] / 128.0;
                const y = v * finalCanvas.height / 2;
                
                if (i === 0) {
                    finalCtx.moveTo(x, y);
                } else {
                    finalCtx.lineTo(x, y);
                }
                
                x += sliceWidth;
            }
            
            finalCtx.stroke();
        }

        function drawFinalParticles() {
            analyser.getByteFrequencyData(dataArray);
            
            finalCtx.fillStyle = 'rgba(0, 0, 0, 0.15)';
            finalCtx.fillRect(0, 0, finalCanvas.width, finalCanvas.height);
            
            for (let i = 0; i < bufferLength; i += 2) {
                if (dataArray[i] > 150) {
                    const x = (i / bufferLength) * finalCanvas.width;
                    const y = finalCanvas.height / 2;
                    const intensity = dataArray[i] / 40;
                    
                    finalParticles.push({
                        x: x,
                        y: y,
                        vx: (Math.random() - 0.5) * intensity,
                        vy: (Math.random() - 0.5) * intensity,
                        life: 1.0,
                        size: Math.random() * 5 + 2,
                        hue: (i / bufferLength) * 360
                    });
                }
            }
            
            for (let i = finalParticles.length - 1; i >= 0; i--) {
                const p = finalParticles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.life -= 0.01;
                
                if (p.life <= 0) {
                    finalParticles.splice(i, 1);
                    continue;
                }
                
                finalCtx.fillStyle = `hsla(${p.hue}, 100%, 50%, ${p.life})`;
                finalCtx.beginPath();
                finalCtx.arc(p.x, p.y, p.size * p.life, 0, Math.PI * 2);
                finalCtx.fill();
            }
        }

        function drawFinalCombo() {
            analyser.getByteFrequencyData(dataArray);
            
            finalCtx.fillStyle = 'rgba(0, 0, 0, 0.2)';
            finalCtx.fillRect(0, 0, finalCanvas.width, finalCanvas.height);
            
            // Bars at bottom
            const barWidth = finalCanvas.width / bufferLength;
            for (let i = 0; i < bufferLength; i++) {
                const barHeight = (dataArray[i] / 255) * 100;
                const x = i * barWidth;
                const y = finalCanvas.height - barHeight;
                
                finalCtx.fillStyle = `hsla(${(i / bufferLength) * 360}, 100%, 50%, 0.5)`;
                finalCtx.fillRect(x, y, barWidth - 2, barHeight);
            }
            
            // Circle in center
            const centerX = finalCanvas.width / 2;
            const centerY = finalCanvas.height / 2;
            const radius = 60;
            
            for (let i = 0; i < bufferLength; i += 2) {
                const angle = (i / bufferLength) * Math.PI * 2;
                const barLength = (dataArray[i] / 255) * 120;
                
                const x1 = centerX + Math.cos(angle) * radius;
                const y1 = centerY + Math.sin(angle) * radius;
                const x2 = centerX + Math.cos(angle) * (radius + barLength);
                const y2 = centerY + Math.sin(angle) * (radius + barLength);
                
                finalCtx.strokeStyle = `hsl(${(i / bufferLength) * 360}, 100%, 60%)`;
                finalCtx.lineWidth = 2;
                finalCtx.beginPath();
                finalCtx.moveTo(x1, y1);
                finalCtx.lineTo(x2, y2);
                finalCtx.stroke();
            }
        }

        // ========================================
        // INITIALIZATION
        // ========================================
        console.log('üéµ Session 4: Music Visualizer loaded!');
        console.log('üé® Create amazing audio-reactive visuals!');
    </script>
</body>
</html>